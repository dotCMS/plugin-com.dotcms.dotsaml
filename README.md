# plugin-dotcms-saml

This plugin allows to modify the authentication process in DOTCMS
using the SAML (Security Assertion Markup Language) protocols for 
frontend, backend or both.

The plugin will add the user in dotcms if the user doens't exist
and everytime the user log the ROLE will be reasigned if the roles 
are sent in the SAML response message.

the SAML Response should alway send the user email, firstname and 
lastname. The roles are optional


########################################
##  CONFIGURATION
########################################

1) Enable or disable in the DOTCMS_plugin_path/conf/urlrewrite-ext.xml file
if you want to use the authentication for frontend, backend or both

2) Set in the DOTCMS_plugin_path/conf/samlauth.properties file the 
configuration values for your service provider(s). If you have several host
in this field you can configure the service provider per each host.

3) Change the DOTCMS_plugin_path/conf/keystore to use your own keystore file
you should take in count that the keystore should have a certificate. Here you 
could see and example of how you can create one
http://blog.tirasa.net/category/codeexp/security/create-a-new-keystore-to.html

4) Set in the DOTCMS_plugin_path/conf/idps/ folder your idp(s) xml file(s). You should 
have at least one idp set (by default in the idp-metadata-discovery-config.xml). If
you have more than one, the others idps should be configured in individuals xml files 
each one in this folder.

########################################
##  HOW TO USE
########################################

To use the plugin run the ./bin/deploy-plugins.sh command and restart your 
dotCMS instance.

To see your service provider metadata generated by the plugin use this url 
https://<myhost>/saml2sp/metadata.xml

The authentication servlet is called in this url 
https://<myhost>/saml2sp/SPInitiator

The logout servlet is in this url
https://<myhost>/saml2sp/logout

And the consumer servlet is in this url
https://<myhost>/saml2sp/consumer

To login and logout in dotCMS use the default dotCMS urls
https://<myhost>/c
https://<myhost>/dotCMS/login
https://<myhost>/dotCMS/logout

